<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Painel calculadora de prazos</title>
  <link rel="icon" type="image/png" href="favicon/calendario.png">
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700;800&display=swap" rel="stylesheet">

  <style>
    body { font-family: 'Inter', sans-serif; }

    .card-3d {
      transform-style: preserve-3d;
      transition: transform 0.3s ease, box-shadow 0.3s ease;
    }
    .card-3d:hover {
      transform: rotateX(6deg) rotateY(-6deg) scale(1.02);
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.25);
    }

    .icon-3d {
      filter: drop-shadow(2px 4px 6px rgba(0,0,0,0.25));
      transition: transform 0.4s ease;
    }
    .group:hover .icon-3d {
      transform: translateY(-5px) rotateZ(-3deg) scale(1.05);
    }

    .btn-3d {
      box-shadow: 4px 6px 0px rgba(0,0,0,0.25);
      transition: all 0.2s ease;
    }
    .btn-3d:hover {
      transform: translateY(-2px);
      box-shadow: 6px 8px 0px rgba(0,0,0,0.25);
    }

    #saudacao {
      opacity: 0;
      transform: translateY(10px);
      transition: all 0.6s ease;
    }
    #saudacao.show {
      opacity: 1;
      transform: translateY(0);
    }

    #modal-box {
      transform: perspective(1000px) rotateX(-10deg) scale(0.9);
      opacity: 0;
    }
    #modal-overlay.active #modal-box {
      transform: perspective(1000px) rotateX(0) scale(1);
      opacity: 1;
      transition: all 0.5s cubic-bezier(0.25, 1, 0.5, 1);
    }

    #particles {
      position: absolute;
      top: 0; left: 0;
      width: 100%;
      height: 100%;
      z-index: -1;
    }
  </style>
</head>

<body class="relative overflow-hidden text-slate-800">
  <!-- Canvas part√≠culas -->
  <canvas id="particles"></canvas>

  <header id="header" class="shadow-md relative z-10">
    <nav class="container mx-auto px-4 py-3 flex items-center justify-center gap-2">
      <span class="text-3xl">üìÖ</span>
      <h1 id="titulo" class="text-2xl sm:text-3xl font-extrabold text-white drop-shadow-md">
        Painel Interativo de Prazos
      </h1>
    </nav>
  </header>

  <main class="container mx-auto px-4 py-8 sm:py-16 relative z-10">
    <div class="text-center">
      <div class="flex justify-center mb-4">
        <img src="assets/calendario.png" alt="√çcone de Calend√°rio" class="h-20 w-20 icon-3d">
      </div>
      <h2 id="saudacao" class="text-4xl sm:text-5xl font-extrabold drop-shadow-sm">Carregando...</h2>
      <p class="text-slate-600 mt-2 text-lg">Escolha uma das op√ß√µes abaixo para come√ßar.</p>
    </div>

    <div class="mt-12 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 max-w-7xl mx-auto">
      <a href="CalculadoraCreditoEspecie/creditoEmEspecie.html" class="group block bg-white p-8 rounded-2xl shadow-lg border border-transparent card-3d">
        <div class="flex items-center gap-4">
          <div class="p-3 rounded-full bg-opacity-20" id="icon-bg-1">
            <img src="assets/cr√©dito_especie.png" alt="√çcone de Cr√©dito em Esp√©cie" class="h-12 w-12 icon-3d">
          </div>
          <div>
            <h3 class="text-xl font-bold text-slate-800 group-hover:transition-colors" id="link-text-1">Prazo Cr√©dito em Esp√©cie</h3>
            <p class="text-slate-500 mt-1">Calcule a data final para recebimento do cr√©dito.</p>
          </div>
        </div>
      </a>

      <a href="CalculadoraPosVendas/posVendas.html" class="group block bg-white p-8 rounded-2xl shadow-lg border border-transparent card-3d">
        <div class="flex items-center gap-4">
          <div class="p-3 rounded-full bg-opacity-20" id="icon-bg-2">
            <img src="assets/pos_vendas.png" alt="√çcone de P√≥s Vendas" class="h-12 w-12 icon-3d">
          </div>
          <div>
            <h3 class="text-xl font-bold text-slate-800 group-hover:transition-colors" id="link-text-2">P√≥s Vendas</h3>
            <p class="text-slate-500 mt-1">Acompanhe os prazos de atendimento do setor.</p>
          </div>
        </div>
      </a>

      <a href="LeiArrependimento/leiArrependimento.html" class="group block bg-white p-8 rounded-2xl shadow-lg border border-transparent card-3d">
        <div class="flex items-center gap-4">
          <div class="p-3 rounded-full bg-opacity-20" id="icon-bg-3">
            <img src="assets/arrependimento.png" alt="√çcone de Direito de Arrependimento" class="h-12 w-12 icon-3d">
          </div>
          <div>
            <h3 class="text-xl font-bold text-slate-800 group-hover:transition-colors" id="link-text-3">Direito de Arrependimento</h3>
            <p class="text-slate-500 mt-1">Verifique o prazo legal de 7 dias para desist√™ncia.</p>
          </div>
        </div>
      </a>
    </div>
  </main>

  <footer class="w-full text-center py-6 mt-8 relative z-10">
    <p class="text-sm text-slate-500">&copy; Todos os direitos reservados.</p>
  </footer>

  <!-- Modal -->
  <div id="modal-overlay" class="fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 transition-opacity duration-300 hidden">
    <div id="modal-box" class="bg-white p-8 rounded-xl shadow-2xl w-full max-w-sm">
      <h3 class="text-2xl font-bold text-slate-900 text-center">Bem-vinda(o) ao Painel!</h3>
      <p class="text-slate-500 text-center mt-2 mb-6">Para come√ßar, qual √© o seu nome?</p>
      <input type="text" id="name-input" class="w-full border border-slate-300 rounded-lg p-3 text-lg focus:outline-none" placeholder="Digite seu primeiro nome...">
      <div id="name-error" class="text-red-500 text-sm mt-2 min-h-[20px]"></div>
      <button id="name-submit-btn" class="w-full text-white mt-4 py-3 rounded-lg btn-3d font-semibold text-lg">
        Continuar
      </button>
    </div>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const saudacaoEl = document.getElementById('saudacao');
      const modalOverlay = document.getElementById('modal-overlay');
      const nameInput = document.getElementById('name-input');
      const nameSubmitBtn = document.getElementById('name-submit-btn');
      const nameError = document.getElementById('name-error');

      // Paletas de cores por dia da semana
      const coresSemana = {
        0: { header: ["from-pink-700","to-pink-500"], text:"text-pink-600", btn:["from-pink-600","to-pink-800"], part:"rgba(236,72,153,0.25)" },
        1: { header: ["from-blue-700","to-blue-500"], text:"text-blue-600", btn:["from-blue-600","to-blue-800"], part:"rgba(37,99,235,0.25)" },
        2: { header: ["from-green-700","to-green-500"], text:"text-green-600", btn:["from-green-600","to-green-800"], part:"rgba(34,197,94,0.25)" },
        3: { header: ["from-purple-700","to-purple-500"], text:"text-purple-600", btn:["from-purple-600","to-purple-800"], part:"rgba(168,85,247,0.25)" },
        4: { header: ["from-orange-700","to-orange-500"], text:"text-orange-600", btn:["from-orange-600","to-orange-800"], part:"rgba(249,115,22,0.25)" },
        5: { header: ["from-red-700","to-red-500"], text:"text-red-600", btn:["from-red-600","to-red-800"], part:"rgba(220,38,38,0.25)" },
        6: { header: ["from-yellow-600","to-yellow-400"], text:"text-yellow-600", btn:["from-yellow-500","to-yellow-700"], part:"rgba(202,138,4,0.25)" },
      };

      const hoje = new Date().getDay();
      const tema = coresSemana[hoje];

      // Header
      const header = document.getElementById("header");
      header.classList.add("bg-gradient-to-r", ...tema.header);

      // Sauda√ß√£o cor din√¢mica
      saudacaoEl.classList.add(tema.text);

      // Bot√£o
      nameSubmitBtn.classList.add("bg-gradient-to-br", ...tema.btn);

      // √çcones circulares
      for (let i=1;i<=3;i++) {
        document.getElementById(`icon-bg-${i}`).classList.add(tema.text.replace("text-","bg-")+"-100");
        document.getElementById(`link-text-${i}`).classList.add(tema.text.replace("text-","group-hover:text-"));
      }

      async function getGender(name) {
        try {
          const [resM, resF] = await Promise.all([
            fetch(`https://servicodados.ibge.gov.br/api/v2/censos/nomes/${name}?sexo=M`),
            fetch(`https://servicodados.ibge.gov.br/api/v2/censos/nomes/${name}?sexo=F`)
          ]);

          const dataM = await resM.json();
          const dataF = await resF.json();

          const freqM = dataM.length > 0 ? dataM[0].res.reduce((acc, item) => acc + item.frequencia, 0) : 0;
          const freqF = dataF.length > 0 ? dataF[0].res.reduce((acc, item) => acc + item.frequencia, 0) : 0;

          if (freqM > freqF) return 'M';
          if (freqF > freqM) return 'F';
          return 'N';
        } catch {
          return 'N';
        }
      }

      function displayGreeting(name, gender) {
        const horaAtual = new Date().getHours();
        let saudacaoDoDia;
        let boasVindas;

        if (horaAtual >= 5 && horaAtual < 12) saudacaoDoDia = 'Bom dia';
        else if (horaAtual >= 12 && horaAtual < 18) saudacaoDoDia = 'Boa tarde';
        else saudacaoDoDia = 'Boa noite';

        if (gender === 'M') boasVindas = 'Seja bem-vindo.';
        else if (gender === 'F') boasVindas = 'Seja bem-vinda.';
        else boasVindas = 'Seja bem-vinda(o).';

        saudacaoEl.innerHTML = `${saudacaoDoDia}, <span class="${tema.text}">${name}</span>! <br class="sm:hidden"/> ${boasVindas}`;
        saudacaoEl.classList.add("show");
      }

      async function main() {
        const nome = localStorage.getItem('nomeUsuario');
        const genero = localStorage.getItem('generoUsuario');

        if (nome && genero) {
          displayGreeting(nome, genero);
        } else {
          modalOverlay.classList.remove('hidden');
          setTimeout(() => modalOverlay.classList.add('active'), 10);
        }
      }

      async function handleNameSubmit() {
        const nome = nameInput.value.trim().split(' ')[0];
        if (!nome) {
          nameError.textContent = 'Por favor, digite seu nome.';
          return;
        }
        nameError.textContent = '';
        nameSubmitBtn.textContent = 'Aguarde...';
        nameSubmitBtn.disabled = true;

        const genero = await getGender(nome);

        localStorage.setItem('nomeUsuario', nome);
        localStorage.setItem('generoUsuario', genero);

        modalOverlay.classList.remove('active');
        setTimeout(() => {
          modalOverlay.classList.add('hidden');
          displayGreeting(nome, genero);
        }, 500);
      }

      nameSubmitBtn.addEventListener('click', handleNameSubmit);
      nameInput.addEventListener('keydown', (e) => e.key === 'Enter' && handleNameSubmit());
      main();

      // --- Part√≠culas din√¢micas ---
      const canvas = document.getElementById("particles");
      const ctx = canvas.getContext("2d");
      let particles = [];

      function resizeCanvas() {
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
      }
      window.addEventListener("resize", resizeCanvas);
      resizeCanvas();

      function createParticles() {
        particles = [];
        for (let i = 0; i < 60; i++) {
          particles.push({
            x: Math.random() * canvas.width,
            y: Math.random() * canvas.height,
            radius: Math.random() * 3 + 1,
            dx: (Math.random() - 0.5) * 0.5,
            dy: (Math.random() - 0.5) * 0.5
          });
        }
      }

      function drawParticles() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        particles.forEach(p => {
          ctx.beginPath();
          ctx.arc(p.x, p.y, p.radius, 0, Math.PI * 2);
          ctx.fillStyle = tema.part;
          ctx.fill();
        });
      }

      function updateParticles() {
        particles.forEach(p => {
          p.x += p.dx;
          p.y += p.dy;
          if (p.x < 0 || p.x > canvas.width) p.dx *= -1;
          if (p.y < 0 || p.y > canvas.height) p.dy *= -1;
        });
      }

      function animate() {
        drawParticles();
        updateParticles();
        requestAnimationFrame(animate);
      }

      createParticles();
      animate();
    });
  </script>
</body>
</html>
